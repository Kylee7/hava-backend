const mongoose = require('mongoose');
require('dotenv').config();

mongoose.connect(process.env.MONGODB_URI)
.then(() => {
    console.log('โ Connected to MongoDB');
    seedRules();
})
.catch((err) => {
    console.error('โ MongoDB connection error:', err.message);
    process.exit(1);
});

async function seedRules() {
    try {
        const RuleSection = require('./models/RuleSection');
        
        await RuleSection.deleteMany({});
        console.log('๐๏ธ  Cleared existing rules');
        
        const rules = [
            {
                order: 1,
                title: 'ููุงููู ุงูุณูุฑูุฑ ุงูุนุงูุฉ',
                icon: 'fas fa-gavel',
                type: 'list',
                cardStyle: 'warning',
                rules: [
                    { number: 1, text: 'ููููุน ุงุณุชุฎุฏุงู ุงู ููุน ูู ุงููุงุน ุงููุงูุงุช ุงู ุงูุจุฑุงูุฌ ุงููุณุงุนุฏุฉ' },
                    { number: 2, text: 'ููููุน ุงูุชุญุงูู ุนูู ุงูููุงููู ุงู ุงุณุชุบูุงู ุงูุซุบุฑุงุช' },
                    { number: 3, text: 'ููููุน ุงูุงุณุงุกุฉ ููุงุนุจูู ุงู ุงูุงุฏุงุฑุฉ' },
                    { number: 4, text: 'ููููุน ุงูุณุจ ูุงูุดุชู ูู ุงูุดุงุช ุงูุนุงู' },
                    { number: 5, text: 'ููููุน ุงูุชุทูู ุนูู ุฑูู ุจูุงู ุงูุงุฎุฑูู' },
                    { number: 6, text: 'ูุฌุจ ุงุญุชุฑุงู ุฌููุน ุงููุงุนุจูู ูุงูุงุฏุงุฑุฉ' },
                    { number: 7, text: 'ููููุน ุงูุชุณูู ุงู ุทูุจ ุงููุงู ูู ุงููุงุนุจูู' },
                    { number: 8, text: 'ููููุน ูุดุฑ ูุนูููุงุช ุดุฎุตูุฉ ุงู ุฑูุงุจุท ุฎุงุฑุฌูุฉ' }
                ]
            },
            {
                order: 2,
                title: 'ููุงููู ุงูุฑูู ุจูุงู',
                icon: 'fas fa-theater-masks',
                type: 'list',
                rules: [
                    { number: 1, text: 'ูุฌุจ ุงูุงูุชุฒุงู ุจุงูุฑูู ุจูุงู ูู ุฌููุน ุงูุงููุงุช' },
                    { number: 2, text: 'ููููุน ุงููุชู ุงูุนุดูุงุฆู (RDM)' },
                    { number: 3, text: 'ููููุน ุงููุชู ูู ุงูููุงุทู ุงูุขููุฉ' },
                    { number: 4, text: 'ูุฌุจ ุงุนุทุงุก ุงููุงุนุจ ูุฑุตุฉ ููุฑูู ุจูุงู ูุจู ุงููุชู' },
                    { number: 5, text: 'ููููุน ุงููุฑูุจ ูู ุงูุฑูู ุจูุงู' },
                    { number: 6, text: 'ูุฌุจ ุงุญุชุฑุงู ุฑูู ุจูุงู ุงูุดุฑุทุฉ' },
                    { number: 7, text: 'ููููุน ุงุณุชุฎุฏุงู ูุนูููุงุช ุฎุงุฑุฌ ุงูุดุฎุตูุฉ (Metagaming)' }
                ]
            },
            {
                order: 3,
                title: 'ุงูููุงุทู ุงูุขููุฉ',
                icon: 'fas fa-shield-alt',
                type: 'text',
                cardStyle: 'safe',
                content: `ุงูููุงุทู ุงูุขููุฉ ูู ููุงุทู ูุง ูุณูุญ ูููุง ุจุงููุชุงู ุงู ุงูุณุฑูุฉ:

- ุงููุณุชุดูู
- ูุญุทุฉ ุงูุดุฑุทุฉ
- ุงูุจูู (ุฏุงุฎู ุงููุจูู)
- ูุญุทุงุช ุงููููุฏ
- ููุงุทู ุงูุชูุนูู

ููุงุญุธุฉ: ุงู ูุฎุงููุฉ ูู ุงูููุงุทู ุงูุขููุฉ ุณุชุคุฏู ุงูู ุนููุจุฉ ููุฑูุฉ`
            },
            {
                order: 4,
                title: 'ููุงููู ุงูุนููุจุงุช',
                icon: 'fas fa-exclamation-triangle',
                type: 'table',
                cardStyle: 'warning',
                tableHeaders: ['ุงููุฎุงููุฉ', 'ุงูุนููุจุฉ ุงูุฃููู', 'ุงูุนููุจุฉ ุงูุซุงููุฉ', 'ุงูุนููุจุฉ ุงูุซุงูุซุฉ'],
                tableRows: [
                    {
                        cells: ['ุงุณุชุฎุฏุงู ูุงูุงุช', 'ุจุงูุฏ ุฏุงุฆู', '-', '-']
                    },
                    {
                        cells: ['ุงููุชู ุงูุนุดูุงุฆู', 'ุชุญุฐูุฑ', '3 ุณุงุนุงุช ุจุงูุฏ', '24 ุณุงุนุฉ ุจุงูุฏ']
                    },
                    {
                        cells: ['ุงูุณุจ ูุงูุดุชู', 'ูููุช ุณุงุนุฉ', 'ูููุช 6 ุณุงุนุงุช', 'ุจุงูุฏ 24 ุณุงุนุฉ']
                    },
                    {
                        cells: ['ุงูุชุทูู ุนูู ุงูุฑูู ุจูุงู', 'ุชุญุฐูุฑ', 'ููู', 'ุจุงูุฏ 3 ุณุงุนุงุช']
                    },
                    {
                        cells: ['ุงุณุชุบูุงู ุซุบุฑุงุช', 'ุชุญุฐูุฑ + ูุตุงุฏุฑุฉ', 'ุจุงูุฏ 24 ุณุงุนุฉ', 'ุจุงูุฏ ุฏุงุฆู']
                    }
                ]
            },
            {
                order: 5,
                title: 'ููุงููู ุงูุณุฑูุฉ',
                icon: 'fas fa-user-secret',
                type: 'custom',
                content: `ุณุฑูุฉ ุงููุงุนุจูู:
- ูุฌุจ ุงุนุทุงุก ุงููุงุนุจ ูุฑุตุฉ ููุฑูู ุจูุงู
- ุงูู ุนุฏุฏ ููุณุฑูุฉ: 2 ูุงุนุจูู
- ููููุน ุงูุณุฑูุฉ ูู ุงูููุงุทู ุงูุขููุฉ

ุณุฑูุฉ ุงููุญูุงุช:
- ูุฌุจ ูุฌูุฏ 5 ุดุฑุทููู ุงูููุงูู ุนูู ุงูุงูู
- ุงูู ุนุฏุฏ ููุณุฑูุฉ: 3 ูุงุนุจูู
- ูุฌุจ ุงูุงูุชุธุงุฑ 30 ุฏูููุฉ ุจูู ูู ุณุฑูุฉ

ุณุฑูุฉ ุงูุจูู:
- ูุฌุจ ูุฌูุฏ 8 ุดุฑุทููู ุงูููุงูู ุนูู ุงูุงูู
- ุงูู ุนุฏุฏ ููุณุฑูุฉ: 5 ูุงุนุจูู
- ูุฌุจ ุงูุงูุชุธุงุฑ ุณุงุนุฉ ุจูู ูู ุณุฑูุฉ`,
                notes: [
                    'ููุงุญุธุฉ: ุงู ุณุฑูุฉ ุฎุงุฑุฌ ูุฐู ุงูููุงููู ุชุนุชุจุฑ ูุฎุงููุฉ'
                ]
            }
        ];
        
        await RuleSection.insertMany(rules);
        
        console.log(`โ Added ${rules.length} rule sections`);
        console.log('โ Rules seeded successfully!');
        
        process.exit(0);
    } catch (error) {
        console.error('โ Error seeding rules:', error.message);
        process.exit(1);
    }
}
